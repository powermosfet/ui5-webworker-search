<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
  <title>WebWorker test</title>
</head>

<body>
  <script src="https://openui5.hana.ondemand.com/resources/sap-ui-core.js"
    data-sap-ui-theme='sap_belize'
    data-sap-ui-libs='sap.m'></script>
  <script>
    sap.ui.getCore().attachInit(function() {
      let h = new sap.m.HBox({  });
      let v = new sap.m.VBox({ width: "25rem" });
      let sf = new sap.m.SearchField();
      v.addItem(sf);
      let l = new sap.m.List();
      v.addItem(l);
      h.addItem(v);

      let rg = new sap.m.RadioButtonGroup();
      let std = new sap.m.RadioButton({ text: "Normal binding" });
      rg.addButton(std);
      let wrk = new sap.m.RadioButton({ text: "Web worker" });
      rg.addButton(wrk);
      h.addItem(rg);

      h.placeAt("ui5-root");

      let mainModel = new sap.ui.model.json.JSONModel("data.json");

      l.setModel(mainModel);
      l.bindItems("/", new sap.m.StandardListItem({ title: "{key}", description: "{text}" }));
    });

    function setupStd(list, mainModel, searchField) {
     list.setModel(mainModel);
     searchField.attachLiveChange(function() {
       list.getBinding("items").filter([
         new sap.ui.model.Filter({ path: "text", operator: sap.ui.model.FilterOperator.Contains, value1: searchField.getValue() })
       ]);
     });
    }
    // var counter = 0;
    
    // var worker = new Worker('worker.js');
    // worker.onmessage = function(msg) {
    //   counter--;
    //   console.log("Main thread received message: " + msg + ", Counter is now " + counter);
    //   updateCounter();
    // }
    
    // function addMessage() {
    //   counter++;
    //   console.log("posting a message from the main thread. Counter is " + counter);
    //   worker.postMessage(counter);
    //   updateCounter();
    // }
    
    // function updateCounter() {
    //   var span = document.getElementById("counter");
    //   span.innerHTML = counter;
    // }
  </script>
  
  <div id="ui5-root" />
</body>

</html> 
